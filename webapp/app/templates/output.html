<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lets Do This!</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="LetsDoThis">
    <meta name="author" content="Richard F Obrecht">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../static/css/custom.css" >
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <!-- Custom styles for this template -->
    <!--link href="./starter-template.css" rel="stylesheet"> -->
    <link href="../static/css/starter-template.css" rel="stylesheet"> 

  </head>

  <body>


    
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/" ><b><font size=5>LetsDoThis</b></font></a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li><a href="/"> <font size=4> Home </font> </a></li>
            <li><a href="/about"> <font size=4>  About </font> </a></li>
            <li><a href="/contact"><font size=4>  Contact </font> </a></li>
	    <li><a href="https://www.letsdothis.com/"> <font size=4>  LetsDoThis </font> </a></li>
            <li><a href="http://insightdatascience.com/"> <font size=4>  Insight </font> </a></li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
      <!-- /.container -->
    </nav>

    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
	<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
	<li data-target="#myCarousel" data-slide-to="1"></li>
	<li data-target="#myCarousel" data-slide-to="2"></li>
      </ol>

      <!-- Wrapper for slides -->
      <div class="carousel-inner" role="listbox">
	
	<div class="item active">        
          <img src="/static/images/runners3.jpg">
          <div class="carousel-caption">
            <h2><b>LetsDoThis</b><br> <font size=5> Estimating the difficulty of a race</font></h2>
            <p></p>
          </div>      
        </div>

	<div class="item">
          <img src="/static/images/sunset_v3.jpg">
          <div class="carousel-caption">
            <h2><b>LetsDoThis</b><br> <font size=5> Estimating the difficulty of a race </font></h2>
            <p></p>
          </div>      
	</div>
	
	<div class="item">
          <img src="/static/images/nyc_runners.jpg">
          <div class="carousel-caption">
            <h2><b>LetsDoThis</b><br> <font size=5> Estimating the difficulty of a race </font></h2>
            <p></p>
          </div>      
	</div>
	
      </div>

      <!-- Left and right controls -->
      <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
	<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
	<span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
	<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
	<span class="sr-only">Next</span>
      </a>
    </div> <!--end of carousel > --> 
    
    <div class="starter-template">
      <div class="form-group">
	<br>
	<h1><b>Difficulty Index: {{ '%0.1f'|format(score*10.0|float) }} </b></h1>
	<h1><b>Course: {{ event }} </b></h1>
      </div><br>
      <figure>
	<img src="{{ name }}" alt="" width="55%" height="50%">
	<figcaption><font size=5><b>Top Panel:</b> The feature importance of the regularized
	    linear regression model where <font color="green">green</font>
	    (<font color="red">red</font>) affects race finish times in the
	    <font color="green">+</font> (<font color="red">-</font>) direction, which
	    outputs a <font color="green">less</font> (<font color="red">more</font>) difficult course. 
	    <b>Bottom Left:</b> Comparing the course median finish time to the average of all courses; larger
	    course times generally are associated with a more difficult course.
	    <b>Bottom Right:</b> The course elevation profile where more elevation gain leads to higher difficulty
	    scores.
	</font></figcaption>
      </figure>
      
      <br><br>

      <figure>
	<img src="{{ name_gpx }}" alt="" width="50%" height="75%">
	<figcaption><font size=5>Features extracted from GPS information, specifically the elevation
	    gain and loss which has been normalized by the race distance. For comparison, the elevation
	    features are compared to the average of all courses. Typically, races with large elevation gains
	    tend to be more difficult.
	</font></figcaption>
      </figure>

      <br><br>
      
      <div class="starter-template_v2">
	<h2><b><font size=7>What Happened in words...</font></b></h2>
	<div class="form-group">
	</div>
	<ul>
	  <li><p><font size=5>You chose to calculate the difficulty for the {{ args[3] }} for a
		{{args[1]}} in the age bracket {{args[0]}}. In addition to GPS information
		about the course, these features are used in the difficulty calculation, and
		either positively or negatively affect the score in the following manner (summarized
		by the top panel in the Figure):</font></p>
	    <table style="width:100%", 'font-size:100%'>
	      <tr>
		<th>Feature</th>
		<th>Numerical Value</th>
		<th>Description</th>
	      </tr>
	      <tr>
		<th>Age</th>
		<th> {{ '%0.3f'|format(beta[0]|float) }}</th>
		<th>Age is a categorical variable ranging from 0-17.</th>
	      </tr>
	      <tr>
		<th>Sex</th>
		<th> {{ '%0.3f'|format(beta[1]|float) }}</th>
		<th>Sex is a categorical variable ranging from 1-2.</th>
	      </tr>
	      <tr>
		<th>Time</th>
		<th> {{ '%0.3f'|format(beta[2]|float) }}</th>
		<th>Median finish time for this race (min).</th>
	      </tr>
	      <tr>
		<th>Elevation Gain</th>
		<th> {{ '%0.3f'|format(beta[3]|float) }}</th>
		<th>Elevation gain normalized by the race distance (m/mi).</th>
	      </tr>
	      <tr>
		<th>Std. Dev.</th>
		<th> {{ '%0.3f'|format(beta[4]|float) }}</th>
		<th>Std dev. in the elevation mean divided by distance (m/mi).</th>
	      </tr>
	      <tr>
		<th>Elevation Difference</th>
		<th> {{ '%0.3f'|format(beta[5]|float) }}</th>
		<th>Difference in the elevation gain and loss divided by distance (m/mi).</th>
	      </tr>
	    </table>
	  </li><br>
	  <li><font size=5>Bottom left panel compares the median finish time for the {{ event }} to the
	      averaged median finish time
	      for all races of this type. If the course time is greater than
	      the average, then the course typically gets a more difficult score.</font></li><br>
	  <li><font size=5>Bottom right panel shows the elevation profile for the {{ event }}; hills and
	      elevation gain are associated with more difficulty.</font></li>
	  <li><font size=5>The GPS feature plot compares the elevation gain/loss for the {{event}}
	      to the averages for all courses of this race type.</font></li>
	</ul>
	<div class="starter-template">
	  <a href="/index" class="btn btn-info btn-lg">
	    <span class="glyphicon glyphicon-home"></span> Home
	  </a>
	</div>
	<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="../static/js/bootstrap.min.js"></script>
      </div>

      <br>
      <!-- Footer -->
      <footer>
	<div class="container">
	  <div class="row">
	    <div class="col-md-12">
              <p>Copyright &copy; LetsDoThis 2019</p>
	    </div>
	  </div>
	  <!-- /.row -->
	</div>
	<!-- /.container -->
      </footer>



      <!-- Bootstrap core JavaScript
	   ================================================== -->
      <!-- Placed at the end of the document so the pages load faster -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
      <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
	<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
	<!-- <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script> -->
	<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
  </body>
</html>

